/// Преобразование 8 -> 16 (0)
/// отрицательное число
//asm c:0
//asm mov r3,#-13
//asm mov a,r3
//asm rlc a
//asm subb a,acc
//asm mov r2,a

BK *
// POWER, RESET
asm C:0
asm sjmp 30h
// =============
// Main programm
asm C:30h

///1 Поиск фронта импульса WITEF
//asm jnb p1.0,30h  // WITEF
//BS C:40h  // стоп

///2 Поиск среза импульса WITES
//asm jb p1.0,30h  // WITES
//BS C:40h  // стоп

///3 Поиск отрицательного импульса WITES,WITEF
//asm jb p1.0,30h  // WITES
//asm jnb p1.0,33h  // WITEF
//BS C:40h  // стоп

///4 Поиск положительного импульса
//asm jnb p1.0,30h  // WITEF
//asm jb p1.0,33h  // WITES
//BS C:40h  // стоп

///5 Дребезг, число совпадений. 1->0
//asm mov r7,#15   // N=15
//asm jb p1.0,30h  // DBNC
//asm djnz r7,32h  // DBNC
//BS C:40h  // стоп




///9 Параллельный ввод WTCODE
//asm mov a,#75h
//asm cjne a,p1,32h  // WAIT
//asm nop  // обработка 
//asm nop  
//BS C:40h  // стоп

///10 Передача управления GOCODE, switch
asm mov a,p1  // ввод байта датчиков
asm anl a,#07h  // 3 младших бита
asm rl a  // формирование индекса адреса
asm mov dph,#00h  // high base
asm mov dpl,#3ch  // low base
asm jmp @a+dptr  // передача управления
asm ajmp 60h  // base, таблица переходов
asm ajmp 70h
asm ajmp 80h
asm ajmp 90h
asm ajmp 0a0h
asm ajmp 0b0h
asm ajmp 0c0h
asm ajmp 0d0h

BS C:61h  // стоп 0
BS C:71h  // стоп 1
BS C:81h  // стоп 2
BS C:91h  // стоп 3
BS C:0a1h  // стоп 4
BS C:0b1h  // стоп 5
BS C:0c1h  // стоп 6
BS C:0d1h  // стоп 7
